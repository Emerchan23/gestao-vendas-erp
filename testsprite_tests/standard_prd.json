{
  "meta": {
    "project": "ERP-BR Sistema de Gestão Empresarial",
    "date": "2025-09-13",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "ERP-BR é um sistema completo de gestão empresarial desenvolvido em Next.js e Node.js, focado em pequenas e médias empresas brasileiras, oferecendo módulos para controle de vendas, clientes, produtos, finanças e relatórios em tempo real.",
  "core_goals": [
    "Fornecer uma solução integrada para gestão empresarial multi-empresa.",
    "Simplificar o controle de vendas, estoque, clientes e finanças.",
    "Automatizar processos financeiros, orçamentos e envio de documentos por email.",
    "Oferecer dashboards e relatórios financeiros atualizados em tempo real.",
    "Garantir facilidade de instalação, uso intuitivo e suporte a múltiplas plataformas."
  ],
  "key_features": [
    "Gestão multi-empresa com dados isolados e configurações independentes.",
    "Sistema completo de autenticação com JWT e bcrypt.",
    "Cadastro e gerenciamento de clientes com histórico e validação de CPF/CNPJ.",
    "Catálogo de produtos com preços, categorias e controle básico de estoque.",
    "Módulo completo de vendas com múltiplos itens e cálculos automáticos.",
    "Sistema de orçamentos personalizáveis com geração de PDFs e envio por email.",
    "Controle financeiro incluindo recebimentos, pagamentos, vales e acertos.",
    "Dashboard interativo com KPIs, gráficos de vendas e análises financeiras.",
    "Backup completo com exportação/importação em JSON e validação de dados.",
    "Configurações do sistema, SMTP para emails e preferências personalizadas.",
    "Interface responsiva e acessível com componentes reutilizáveis e gráficos integrados.",
    "Containerização com Docker para fácil deploy e manutenção."
  ],
  "user_flow_summary": [
    "Fluxo de primeira instalação automatizada com verificação de dependências, configuração e inicialização do sistema.",
    "Criação de orçamentos incluindo seleção de cliente, adição de produtos, personalização visual e envio por email.",
    "Realização de vendas com seleção de cliente, inclusão de produtos e atualização automática do dashboard.",
    "Gerenciamento de clientes com cadastro, busca avançada e histórico de transações.",
    "Utilização do dashboard para visualização de métricas em tempo real e geração de relatórios customizados."
  ],
  "validation_criteria": [
    "Usuário pode cadastrar múltiplas empresas com dados isolados e configurações fiscais independentes.",
    "Cadastro e edição de clientes com validação rigorosa de CPF/CNPJ e histórico de compras.",
    "Criação, edição e listagem de produtos com categorias e preços devidamente validados.",
    "Registro e controle de vendas com cálculos corretos e atualização do estoque quando aplicável.",
    "Orçamentos criados com layout customizável, gerados em PDF e enviados por email configurado.",
    "Dashboard mostrando métricas e gráficos atualizados conforme os dados inseridos.",
    "Exportação e importação de backup completos com integridade e opções de merge/substituição.",
    "Configurações do sistema que permitem personalização do SMTP, layout e preferências do usuário.",
    "Performance consistente com tempo de resposta inferior a 2 segundos para operações básicas.",
    "Segurança assegurada por autenticação JWT, sanitização de dados e middleware de autorização."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "JavaScript",
      "Next.js 15.5.3",
      "React 19",
      "Node.js",
      "SQLite",
      "Better-SQLite3",
      "Tailwind CSS 4.1.9",
      "Radix UI",
      "Shadcn/ui",
      "Zod 3.25.67",
      "React Hook Form",
      "Lucide React",
      "Docker",
      "bcryptjs",
      "jsonwebtoken",
      "nodemailer",
      "jsPDF",
      "xlsx",
      "recharts",
      "date-fns",
      "nanoid",
      "uuid"
    ],
    "features": [
      {
        "name": "Sistema de Autenticação",
        "description": "Sistema completo de login e autenticação com JWT e bcrypt",
        "files": [
          "app/login/page.tsx",
          "app/api/auth/route.ts",
          "lib/auth.ts",
          "contexts/AuthContext.tsx",
          "middleware.ts"
        ]
      },
      {
        "name": "Gestão de Clientes",
        "description": "CRUD completo para cadastro e gerenciamento de clientes",
        "files": [
          "app/clientes/page.tsx",
          "app/api/clientes/route.ts",
          "app/api/clientes/[id]/route.ts"
        ]
      },
      {
        "name": "Catálogo de Produtos",
        "description": "Sistema de cadastro e gerenciamento de produtos com preços e categorias",
        "files": [
          "app/produtos/page.tsx",
          "app/api/produtos/route.ts",
          "app/api/produtos/[id]/route.ts"
        ]
      },
      {
        "name": "Sistema de Vendas",
        "description": "Módulo completo para registro e controle de vendas",
        "files": [
          "app/vendas/page.tsx",
          "app/api/vendas/route.ts",
          "app/api/vendas/[id]/route.ts"
        ]
      },
      {
        "name": "Sistema de Orçamentos",
        "description": "Criação, edição e envio de orçamentos por email com layout customizável",
        "files": [
          "app/orcamentos/page.tsx",
          "app/api/orcamentos/route.ts",
          "app/api/orcamentos/[id]/route.ts",
          "app/api/orcamentos/[id]/email/route.ts",
          "lib/orcamentos.ts"
        ]
      },
      {
        "name": "Sistema de Acertos Financeiros",
        "description": "Controle financeiro de acertos e fechamentos",
        "files": [
          "app/acertos/page.tsx",
          "app/api/acertos/route.ts",
          "app/api/acertos/[id]/route.ts",
          "lib/acertos.ts"
        ]
      },
      {
        "name": "Sistema de Vales",
        "description": "Gestão de vales de crédito e débito",
        "files": [
          "app/vales/page.tsx",
          "app/api/vales/route.ts",
          "lib/vales.ts"
        ]
      },
      {
        "name": "Outros Negócios",
        "description": "Controle de receitas e despesas extras",
        "files": [
          "app/outros-negocios/page.tsx",
          "app/api/outros-negocios/route.ts",
          "app/api/outros-negocios/[id]/route.ts",
          "lib/outros-negocios.ts"
        ]
      },
      {
        "name": "Gestão de Fornecedores",
        "description": "Cadastro e controle de fornecedores",
        "files": [
          "app/fornecedores/page.tsx",
          "app/api/fornecedores/route.ts"
        ]
      },
      {
        "name": "Sistema de Relatórios",
        "description": "Dashboard e relatórios financeiros e de vendas",
        "files": [
          "app/relatorios/page.tsx",
          "app/api/relatorios/route.ts",
          "app/api/relatorios/vendas/route.ts",
          "app/api/dashboard/route.ts"
        ]
      },
      {
        "name": "Sistema de Backup",
        "description": "Exportação e importação completa de dados em JSON",
        "files": [
          "app/backup/export/page.tsx",
          "app/backup/import/page.tsx",
          "app/api/backup/route.ts",
          "app/api/backup/export/route.ts",
          "app/api/backup/import/route.ts"
        ]
      },
      {
        "name": "Configurações do Sistema",
        "description": "Configurações gerais da empresa e sistema",
        "files": [
          "app/configuracoes/page.tsx",
          "app/api/config/route.ts",
          "lib/config.ts",
          "lib/company-config.ts"
        ]
      },
      {
        "name": "Sistema de Email",
        "description": "Envio de emails para orçamentos e notificações",
        "files": [
          "app/api/email/route.ts"
        ]
      },
      {
        "name": "Gestão de Modalidades",
        "description": "Configuração de modalidades de pagamento",
        "files": [
          "app/api/modalidades/route.ts",
          "lib/modalidades.ts"
        ]
      },
      {
        "name": "Unidades de Medida",
        "description": "Cadastro de unidades de medida para produtos",
        "files": [
          "app/api/unidades-medida/route.ts"
        ]
      },
      {
        "name": "Sistema de Taxas",
        "description": "Configuração de taxas e tarifas",
        "files": [
          "app/api/taxas/route.ts",
          "lib/rates.ts"
        ]
      },
      {
        "name": "Gestão de Usuários",
        "description": "Controle de usuários do sistema",
        "files": [
          "app/api/usuarios/route.ts"
        ]
      },
      {
        "name": "Preferências do Usuário",
        "description": "Configurações personalizadas por usuário",
        "files": [
          "app/api/user-prefs/route.ts",
          "lib/user-prefs.ts"
        ]
      },
      {
        "name": "Sistema de Pagamentos",
        "description": "Controle de pagamentos e parcelas",
        "files": [
          "app/api/pagamentos/route.ts"
        ]
      },
      {
        "name": "Menu Principal",
        "description": "Interface principal de navegação do sistema",
        "files": [
          "app/menu/page.tsx"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Painel principal com métricas e indicadores",
        "files": [
          "app/page.tsx",
          "app/api/dashboard/metrics/route.ts"
        ]
      },
      {
        "name": "Banco de Dados SQLite",
        "description": "Sistema de banco de dados com Better-SQLite3",
        "files": [
          "lib/db.ts",
          "init-database.ts",
          "init-database.js"
        ]
      },
      {
        "name": "Sistema de Cache",
        "description": "Cache para otimização de performance",
        "files": [
          "lib/cache.ts"
        ]
      },
      {
        "name": "Utilitários de Formatação",
        "description": "Funções para formatação de dados e máscaras",
        "files": [
          "lib/format.ts",
          "lib/masks.ts",
          "lib/utils.ts",
          "lib/util.ts"
        ]
      },
      {
        "name": "Sistema de Impressão",
        "description": "Geração de PDFs e impressão de documentos",
        "files": [
          "lib/print.ts"
        ]
      },
      {
        "name": "Integração com Planilhas",
        "description": "Exportação e importação de dados em Excel",
        "files": [
          "lib/planilha.ts"
        ]
      },
      {
        "name": "Componentes UI",
        "description": "Biblioteca de componentes reutilizáveis com Radix UI",
        "files": [
          "components/ui/button.tsx",
          "components/ui/card.tsx",
          "components/ui/dialog.tsx",
          "components/ui/form.tsx",
          "components/ui/input.tsx",
          "components/ui/table.tsx",
          "components/ui/select.tsx",
          "components/ui/toast.tsx"
        ]
      },
      {
        "name": "Componentes de Gráficos",
        "description": "Componentes para visualização de dados com Recharts",
        "files": [
          "components/charts/",
          "components/ui/chart.tsx"
        ]
      },
      {
        "name": "Hooks Customizados",
        "description": "Hooks React personalizados para funcionalidades específicas",
        "files": [
          "hooks/use-mobile.ts",
          "hooks/use-toast.ts"
        ]
      },
      {
        "name": "Sistema de Diagnóstico",
        "description": "Ferramentas de diagnóstico e verificação do sistema",
        "files": [
          "scripts/diagnose.js",
          "auto-install.js",
          "auto-start.js"
        ]
      },
      {
        "name": "Containerização Docker",
        "description": "Configuração completa para Docker e Docker Compose",
        "files": [
          "Dockerfile",
          "docker-compose.yml",
          "server.js"
        ]
      },
      {
        "name": "Sistema de Migração",
        "description": "Scripts para migração e atualização do banco de dados",
        "files": [
          "run-migration.js",
          "migrate-modalidades.js",
          "migrations/"
        ]
      },
      {
        "name": "Testes Automatizados",
        "description": "Suite de testes para validação das funcionalidades",
        "files": [
          "test-api-acertos.js",
          "test-backup-restore.js",
          "test-database.js",
          "test-final-user-flow.js",
          "test-validation.js"
        ]
      },
      {
        "name": "API de Saúde",
        "description": "Endpoint para verificação de status do sistema",
        "files": [
          "app/api/health/route.ts"
        ]
      },
      {
        "name": "Middleware de Segurança",
        "description": "Middleware para autenticação e autorização",
        "files": [
          "middleware.ts"
        ]
      }
    ]
  }
}
